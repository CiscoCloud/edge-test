subprojects {
    apply plugin: 'scala'

    repositories {
        mavenCentral()
        maven {
        	url "https://oss.sonatype.org/content/repositories/public"
        }
        maven {
            url "http://packages.confluent.io/maven/"
        }
    }

    dependencies {
        compile 'org.scala-lang:scala-library:2.10.4'
        compile 'com.github.scopt:scopt_2.10:3.3.0'
    }
}

project("latencies-calc") {
    version = '1.0'

    jar {
        zip64 = true
        doFirst {
            from(configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }) {
                exclude "META-INF/*.SF"
                exclude "META-INF/*.DSA"
                exclude "META-INF/*.RSA"
            }
        }
        manifest.attributes("Main-Class": "ly.stealth.latencies.Main")
    }

    dependencies {
        compile "com.datastax.cassandra:cassandra-driver-core:2.1.4"
        compile("com.datastax.spark:spark-cassandra-connector-java_2.10:1.2.0-alpha1")
        compile("io.confluent:kafka-avro-serializer:1.0")
        compile("org.apache.kafka:kafka_2.10:0.8.2.0-cp")
        compile("org.apache.spark:spark-streaming_2.10:1.3.1")
        compile files("libs/spark-streaming-kafka_2.10-1.4.0-SNAPSHOT.jar")
    }
}
